#define BLYNK_TEMPLATE_ID "TMPL69uxsFREi"           // Template ID kau
#define BLYNK_TEMPLATE_NAME "esp32led"              // Template Name kau
#define BLYNK_AUTH_TOKEN "KRjCe2I_zfEexrAiYnNyzV0kQlxZYRuU"  // Auth Token kau

#include <WiFi.h>
#include <BlynkSimpleEsp32.h>

#define LED_PIN 27          // Pin LED fizikal

char ssid[] = "HafizTM 2.4GHz";     // Nama WiFi
char pass[] = "h@f1z5335";          // Password WiFi

void setup() {
  Serial.begin(115200);
  delay(1000);
  Serial.println("ESP32 + Blynk LED Fizikal Siap!");

  pinMode(LED_PIN, OUTPUT);
  digitalWrite(LED_PIN, LOW);   // Mula OFF

  Blynk.begin(BLYNK_AUTH_TOKEN, ssid, pass);
  Serial.println("Sedang sambung ke Blynk...");
}

void loop() {
  Blynk.run();   // Wajib untuk sync dengan app
}

// Fungsi ni auto panggil bila kau tekan button/switch di Blynk (Virtual Pin V0)
BLYNK_WRITE(V0) {
  int nilai = param.asInt();   // Dapat nilai dari Blynk: 0 = OFF, 1 = ON

  digitalWrite(LED_PIN, nilai ? HIGH : LOW);   // Kawal LED fizikal

  Serial.print("LED fizikal dikawal dari Blynk: ");
  Serial.println(nilai ? "NYALA" : "MATI");
}
